apply plugin: 'com.android.library'

// versionCode is an integer and must increase with each release.
def vc = "$project.version".tokenize('.');
def major = vc[0].toInteger() * 1000000
def minor = vc[1].toInteger() * 1000
def patch = vc[2].tokenize('-')[0].toInteger()

android {
    compileSdkVersion 23
    buildToolsVersion "23.0.2"

    defaultConfig {
        minSdkVersion 19
        targetSdkVersion 23
        versionCode (major + minor + patch)
        versionName "${project.version}"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    buildTypes.each {
        it.buildConfigField "String", "Implementation_Id", "\"${project.name}\""
        it.buildConfigField "String", "Implementation_Vendor", "\"mil.army.missioncommand\""
        it.buildConfigField "String", "Implementation_Title", "\"EMP3 Android ${project.version}\""
        it.buildConfigField "String", "Implementation_Version", "\"${project.revision}\""
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }
}